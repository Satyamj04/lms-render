# Generated by Django 4.2 on 2026-02-06 14:04

from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='CourseAssignment',
            fields=[
                ('assignment_id', models.UUIDField(db_column='assignment_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('assigned_at', models.DateTimeField(db_column='assigned_at', default=django.utils.timezone.now)),
            ],
            options={
                'db_table': 'course_assignments',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Profile',
            fields=[
                ('id', models.UUIDField(db_column='user_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('first_name', models.CharField(db_column='first_name', max_length=100)),
                ('last_name', models.CharField(db_column='last_name', max_length=100)),
                ('email', models.EmailField(db_column='email', max_length=254, unique=True)),
                ('password', models.CharField(db_column='password_hash', max_length=255)),
                ('primary_role', models.CharField(choices=[('admin', 'admin'), ('trainer', 'trainer'), ('manager', 'manager'), ('trainee', 'trainee')], db_column='primary_role', default='trainee', max_length=50)),
                ('status', models.CharField(choices=[('active', 'active'), ('inactive', 'inactive'), ('archived', 'archived')], db_column='status', default='active', max_length=20)),
                ('profile_image_url', models.TextField(blank=True, db_column='profile_image_url', null=True)),
                ('last_login', models.DateTimeField(blank=True, db_column='last_login', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
            ],
            options={
                'db_table': 'users',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Team',
            fields=[
                ('team_id', models.UUIDField(db_column='team_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('team_name', models.CharField(db_column='team_name', max_length=255, unique=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('status', models.CharField(db_column='status', default='active', max_length=20)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
            ],
            options={
                'db_table': 'teams',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Assessment',
            fields=[
                ('assessment_id', models.UUIDField(db_column='assessment_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=500)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('assessment_type', models.CharField(choices=[('descriptive', 'Descriptive'), ('practical', 'Practical'), ('oral', 'Oral'), ('rubric', 'Rubric'), ('peer', 'Peer'), ('survey', 'Survey'), ('other', 'Other')], db_column='assessment_type', max_length=30)),
                ('due_date', models.DateTimeField(blank=True, db_column='due_date', null=True)),
                ('max_attempts', models.IntegerField(db_column='max_attempts', default=1)),
                ('points_possible', models.IntegerField(db_column='points_possible', default=100)),
                ('is_mandatory', models.BooleanField(db_column='is_mandatory', default=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('published', 'Published'), ('archived', 'Archived')], db_column='status', default='draft', max_length=20)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
            ],
            options={
                'db_table': 'assessments',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AssessmentItem',
            fields=[
                ('item_id', models.UUIDField(db_column='item_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('criterion', models.CharField(db_column='criterion', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('max_points', models.IntegerField(db_column='max_points', default=0)),
                ('weight', models.DecimalField(db_column='weight', decimal_places=2, default=0, max_digits=5)),
                ('sequence_order', models.IntegerField(blank=True, db_column='sequence_order', null=True)),
                ('assessment', models.ForeignKey(db_column='assessment_id', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='trainer.assessment')),
            ],
            options={
                'db_table': 'assessment_items',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Assignment',
            fields=[
                ('id', models.UUIDField(db_column='assignment_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('assignment_type', models.CharField(blank=True, db_column='assignment_type', max_length=50, null=True)),
                ('evaluation_method', models.CharField(blank=True, db_column='evaluation_method', max_length=50, null=True)),
                ('course_id', models.UUIDField(blank=True, db_column='course_id', null=True)),
                ('due_date', models.DateTimeField(blank=True, db_column='due_date', null=True)),
                ('max_attempts', models.IntegerField(blank=True, db_column='max_attempts', null=True)),
                ('points_possible', models.IntegerField(blank=True, db_column='points_possible', null=True)),
                ('mandatory_completion', models.BooleanField(db_column='is_mandatory', default=False)),
                ('created_by', models.UUIDField(db_column='created_by', default=uuid.uuid4)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('deleted_at', models.DateTimeField(blank=True, db_column='deleted_at', null=True)),
                ('version', models.IntegerField(blank=True, db_column='version', null=True)),
            ],
            options={
                'db_table': 'assignments',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AssignmentRubricItem',
            fields=[
                ('item_id', models.UUIDField(db_column='item_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('criterion', models.CharField(db_column='criterion', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('max_points', models.IntegerField(db_column='max_points', default=0)),
                ('weight', models.DecimalField(db_column='weight', decimal_places=2, default=0, max_digits=5)),
                ('sequence_order', models.IntegerField(blank=True, db_column='sequence_order', null=True)),
                ('assignment', models.ForeignKey(db_column='assignment_id', on_delete=django.db.models.deletion.CASCADE, related_name='rubric_items', to='trainer.assignment')),
            ],
            options={
                'db_table': 'assignment_rubric_items',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AssignmentSubmission',
            fields=[
                ('id', models.UUIDField(db_column='submission_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('submission_text', models.TextField(blank=True, db_column='submission_text', null=True)),
                ('submission_file_url', models.URLField(blank=True, db_column='submission_files', null=True)),
                ('score', models.IntegerField(blank=True, db_column='score', null=True)),
                ('feedback', models.TextField(blank=True, db_column='feedback', null=True)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('graded', 'Graded')], db_column='status', default='submitted', max_length=20)),
                ('submitted_at', models.DateTimeField(db_column='submitted_at', default=django.utils.timezone.now)),
                ('graded_at', models.DateTimeField(blank=True, db_column='graded_at', null=True)),
                ('assignment', models.ForeignKey(db_column='assignment_id', on_delete=django.db.models.deletion.CASCADE, related_name='submissions', to='trainer.assignment')),
                ('graded_by', models.ForeignKey(blank=True, db_column='graded_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='graded_submissions', to='trainer.profile')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='assignment_submissions', to='trainer.profile')),
            ],
            options={
                'db_table': 'assignment_submissions',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Badge',
            fields=[
                ('badge_id', models.UUIDField(db_column='badge_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('badge_name', models.CharField(db_column='badge_name', max_length=255)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('badge_type', models.CharField(choices=[('gold', 'Gold'), ('silver', 'Silver'), ('bronze', 'Bronze'), ('positive', 'Positive'), ('negative', 'Negative'), ('custom', 'Custom')], db_column='badge_type', max_length=30)),
                ('badge_icon_url', models.URLField(blank=True, db_column='badge_icon_url', null=True)),
                ('points_threshold', models.IntegerField(db_column='points_threshold', default=0)),
                ('visibility', models.CharField(choices=[('public', 'Public'), ('private', 'Private')], db_column='visibility', default='public', max_length=20)),
                ('is_active', models.BooleanField(db_column='is_active', default=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
            ],
            options={
                'db_table': 'badges',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Course',
            fields=[
                ('id', models.UUIDField(db_column='course_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=500)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('about', models.TextField(blank=True, db_column='about', null=True)),
                ('outcomes', models.TextField(blank=True, db_column='outcomes', null=True)),
                ('course_type', models.CharField(choices=[('self_paced', 'Self Paced'), ('instructor_led', 'Instructor Led'), ('blended', 'Blended')], db_column='course_type', default='self_paced', max_length=30)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('published', 'Published'), ('archived', 'Archived')], db_column='status', default='draft', max_length=20)),
                ('is_mandatory', models.BooleanField(db_column='is_mandatory', default=False)),
                ('estimated_duration_hours', models.IntegerField(blank=True, db_column='estimated_duration_hours', null=True)),
                ('passing_criteria', models.IntegerField(db_column='passing_criteria', default=70)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('created_by', models.ForeignKey(db_column='created_by', on_delete=django.db.models.deletion.CASCADE, related_name='created_courses', to='trainer.profile')),
            ],
            options={
                'db_table': 'courses',
                'ordering': ['-created_at'],
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Quiz',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('time_limit', models.IntegerField(blank=True, db_column='time_limit', null=True)),
                ('passing_score', models.IntegerField(db_column='passing_score', default=70)),
                ('attempts_allowed', models.IntegerField(db_column='attempts_allowed', default=1)),
                ('show_answers', models.BooleanField(db_column='show_answers', default=False)),
                ('randomize_questions', models.BooleanField(db_column='randomize_questions', default=False)),
                ('mandatory_completion', models.BooleanField(db_column='mandatory_completion', default=False)),
            ],
            options={
                'db_table': 'quizzes',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('role_id', models.UUIDField(db_column='role_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role_name', models.CharField(db_column='role_name', max_length=50, unique=True)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
            ],
            options={
                'db_table': 'roles',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Test',
            fields=[
                ('test_id', models.UUIDField(db_column='test_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=500)),
                ('description', models.TextField(blank=True, db_column='description', null=True)),
                ('test_type', models.CharField(choices=[('quiz', 'Quiz'), ('test', 'Test'), ('exam', 'Exam'), ('assessment', 'Assessment')], db_column='test_type', max_length=30)),
                ('time_limit_minutes', models.IntegerField(blank=True, db_column='time_limit_minutes', null=True)),
                ('passing_score', models.IntegerField(db_column='passing_score', default=70)),
                ('max_attempts', models.IntegerField(db_column='max_attempts', default=1)),
                ('randomize_questions', models.BooleanField(db_column='randomize_questions', default=False)),
                ('show_correct_answers', models.BooleanField(db_column='show_correct_answers', default=False)),
                ('points_possible', models.IntegerField(db_column='points_possible', default=100)),
                ('is_mandatory', models.BooleanField(db_column='is_mandatory', default=True)),
                ('record_confidence', models.BooleanField(db_column='record_confidence', default=True)),
                ('confidence_scale', models.CharField(choices=[('0_to_100', '0-100'), ('1_to_5', '1-5'), ('1_to_7', '1-7'), ('low_med_high', 'Low/Med/High')], db_column='confidence_scale', default='0_to_100', max_length=20)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('course', models.ForeignKey(blank=True, db_column='course_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='trainer.course')),
                ('created_by', models.ForeignKey(db_column='created_by', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'tests',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='TestAttempt',
            fields=[
                ('attempt_id', models.UUIDField(db_column='attempt_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('attempt_number', models.IntegerField(db_column='attempt_number')),
                ('started_at', models.DateTimeField(db_column='started_at', default=django.utils.timezone.now)),
                ('submitted_at', models.DateTimeField(blank=True, db_column='submitted_at', null=True)),
                ('time_spent_minutes', models.IntegerField(blank=True, db_column='time_spent_minutes', null=True)),
                ('status', models.CharField(choices=[('in_progress', 'In Progress'), ('completed', 'Completed'), ('abandoned', 'Abandoned'), ('timed_out', 'Timed Out')], db_column='status', default='in_progress', max_length=30)),
                ('score', models.IntegerField(blank=True, db_column='score', null=True)),
                ('points_earned', models.IntegerField(db_column='points_earned', default=0)),
                ('passed', models.BooleanField(blank=True, db_column='passed', null=True)),
                ('graded_at', models.DateTimeField(blank=True, db_column='graded_at', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('graded_by', models.ForeignKey(blank=True, db_column='graded_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='trainer.profile')),
                ('test', models.ForeignKey(db_column='test_id', on_delete=django.db.models.deletion.CASCADE, related_name='attempts', to='trainer.test')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'test_attempts',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='TestQuestion',
            fields=[
                ('question_id', models.UUIDField(db_column='question_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('question_text', models.TextField(db_column='question_text')),
                ('question_type', models.CharField(choices=[('mcq', 'MCQ'), ('true_false', 'True/False'), ('short_answer', 'Short Answer'), ('essay', 'Essay'), ('fill_blank', 'Fill Blank')], db_column='question_type', max_length=30)),
                ('options', models.JSONField(db_column='options', default=dict)),
                ('correct_answer', models.TextField(blank=True, db_column='correct_answer', null=True)),
                ('points', models.IntegerField(db_column='points', default=1)),
                ('difficulty', models.CharField(blank=True, choices=[('easy', 'Easy'), ('medium', 'Medium'), ('hard', 'Hard')], db_column='difficulty', max_length=20, null=True)),
                ('explanation', models.TextField(blank=True, db_column='explanation', null=True)),
                ('sequence_order', models.IntegerField(blank=True, db_column='sequence_order', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('test', models.ForeignKey(db_column='test_id', on_delete=django.db.models.deletion.CASCADE, related_name='questions', to='trainer.test')),
            ],
            options={
                'db_table': 'test_questions',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Unit',
            fields=[
                ('id', models.UUIDField(db_column='module_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('module_type', models.CharField(choices=[('text', 'Text'), ('video', 'Video'), ('audio', 'Audio'), ('presentation', 'Presentation'), ('scorm', 'SCORM'), ('xapi', 'xAPI'), ('quiz', 'Quiz'), ('test', 'Test'), ('assignment', 'Assignment'), ('survey', 'Survey'), ('page', 'Page'), ('mixed', 'Mixed')], db_column='module_type', max_length=30)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True, null=True)),
                ('sequence_order', models.IntegerField(db_column='sequence_order', default=0)),
                ('is_mandatory', models.BooleanField(db_column='is_mandatory', default=True)),
                ('estimated_duration_minutes', models.IntegerField(blank=True, db_column='estimated_duration_minutes', null=True)),
                ('video_count', models.IntegerField(db_column='video_count', default=0)),
                ('has_quizzes', models.BooleanField(db_column='has_quizzes', default=False)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('course', models.ForeignKey(db_column='course_id', on_delete=django.db.models.deletion.CASCADE, related_name='units', to='trainer.course')),
            ],
            options={
                'db_table': 'modules',
                'ordering': ['course', 'sequence_order'],
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='TeamMember',
            fields=[
                ('team', models.ForeignKey(db_column='team_id', on_delete=django.db.models.deletion.CASCADE, primary_key=True, related_name='members', serialize=False, to='trainer.team')),
                ('is_primary_team', models.BooleanField(db_column='is_primary_team', default=True)),
                ('assigned_at', models.DateTimeField(db_column='assigned_at', default=django.utils.timezone.now)),
            ],
            options={
                'db_table': 'team_members',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VideoUnit',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('video_url', models.CharField(blank=True, db_column='video_url', max_length=500, null=True)),
                ('video_storage_path', models.CharField(blank=True, db_column='video_storage_path', max_length=500, null=True)),
                ('duration', models.IntegerField(db_column='duration', default=0)),
                ('completion_type', models.CharField(choices=[('full', 'Full'), ('percentage', 'Percentage')], db_column='completion_type', default='full', max_length=20)),
                ('required_watch_percentage', models.IntegerField(db_column='required_watch_percentage', default=100)),
                ('allow_skip', models.BooleanField(db_column='allow_skip', default=False)),
                ('allow_rewind', models.BooleanField(db_column='allow_rewind', default=True)),
                ('unit', models.OneToOneField(db_column='unit_id', on_delete=django.db.models.deletion.CASCADE, related_name='video_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'video_units',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='UserRole',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('assigned_at', models.DateTimeField(db_column='assigned_at', default=django.utils.timezone.now)),
                ('assigned_by', models.ForeignKey(blank=True, db_column='assigned_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='trainer.profile')),
                ('role', models.ForeignKey(db_column='role_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.role')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'user_roles',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='UserProgress',
            fields=[
                ('progress_id', models.UUIDField(db_column='progress_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('completion_percentage', models.IntegerField(db_column='completion_percentage', default=0)),
                ('total_points_earned', models.IntegerField(db_column='total_points_earned', default=0)),
                ('average_score', models.IntegerField(db_column='average_score', default=0)),
                ('time_spent_minutes', models.IntegerField(db_column='time_spent_minutes', default=0)),
                ('modules_completed', models.IntegerField(db_column='modules_completed', default=0)),
                ('total_modules', models.IntegerField(db_column='total_modules', default=0)),
                ('tests_passed', models.IntegerField(db_column='tests_passed', default=0)),
                ('tests_attempted', models.IntegerField(db_column='tests_attempted', default=0)),
                ('assignments_submitted', models.IntegerField(db_column='assignments_submitted', default=0)),
                ('assignments_graded', models.IntegerField(db_column='assignments_graded', default=0)),
                ('started_at', models.DateTimeField(blank=True, db_column='started_at', null=True)),
                ('completed_at', models.DateTimeField(blank=True, db_column='completed_at', null=True)),
                ('last_activity', models.DateTimeField(blank=True, db_column='last_activity', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('course', models.ForeignKey(db_column='course_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.course')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'user_progress',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='UnitProgress',
            fields=[
                ('id', models.UUIDField(db_column='completion_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('completion_percentage', models.IntegerField(db_column='completion_percentage', default=0)),
                ('is_completed', models.BooleanField(db_column='is_completed', default=False)),
                ('time_spent_minutes', models.IntegerField(db_column='time_spent_minutes', default=0)),
                ('completed_at', models.DateTimeField(blank=True, db_column='completed_at', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_column='created_at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('unit', models.ForeignKey(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='progress', to='trainer.unit')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='unit_progress_records', to='trainer.profile')),
            ],
            options={
                'db_table': 'module_completions',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='TextUnit',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('content', models.TextField(blank=True, db_column='content', null=True)),
                ('unit', models.OneToOneField(db_column='unit_id', on_delete=django.db.models.deletion.CASCADE, related_name='text_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'text_units',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='TestResponse',
            fields=[
                ('response_id', models.UUIDField(db_column='response_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('selected_options', models.JSONField(db_column='selected_options', default=dict)),
                ('answer_text', models.TextField(blank=True, db_column='answer_text', null=True)),
                ('is_correct', models.BooleanField(blank=True, db_column='is_correct', null=True)),
                ('score', models.IntegerField(db_column='score', default=0)),
                ('confidence_score', models.IntegerField(blank=True, db_column='confidence_score', null=True)),
                ('confidence_scale', models.CharField(db_column='confidence_scale', default='0_to_100', max_length=20)),
                ('time_spent_seconds', models.IntegerField(blank=True, db_column='time_spent_seconds', null=True)),
                ('answered_at', models.DateTimeField(db_column='answered_at', default=django.utils.timezone.now)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('attempt', models.ForeignKey(db_column='attempt_id', on_delete=django.db.models.deletion.CASCADE, related_name='responses', to='trainer.testattempt')),
                ('question', models.ForeignKey(db_column='question_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.testquestion')),
                ('test', models.ForeignKey(db_column='test_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.test')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'test_responses',
                'managed': True,
            },
        ),
        migrations.AddField(
            model_name='test',
            name='module',
            field=models.ForeignKey(blank=True, db_column='module_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='trainer.unit'),
        ),
        migrations.CreateModel(
            name='Survey',
            fields=[
                ('id', models.UUIDField(db_column='survey_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('questions', models.JSONField(db_column='questions', default=list)),
                ('allow_anonymous', models.BooleanField(db_column='allow_anonymous', default=False)),
                ('unit', models.OneToOneField(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='survey_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'surveys',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='ScormPackage',
            fields=[
                ('id', models.UUIDField(db_column='scorm_package_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('package_type', models.CharField(blank=True, choices=[('scorm_1_2', 'SCORM 1.2'), ('scorm_2004', 'SCORM 2004'), ('xapi', 'xAPI')], db_column='package_type', max_length=20, null=True)),
                ('file_url', models.URLField(blank=True, db_column='file_url', null=True)),
                ('file_storage_path', models.CharField(blank=True, db_column='file_storage_path', max_length=500, null=True)),
                ('version', models.CharField(blank=True, db_column='version', max_length=50, null=True)),
                ('completion_tracking', models.BooleanField(db_column='completion_tracking', default=True)),
                ('score_tracking', models.BooleanField(db_column='score_tracking', default=True)),
                ('unit', models.OneToOneField(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='scorm_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'scorm_packages',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='QuizAttempt',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('score', models.IntegerField(blank=True, db_column='score', null=True)),
                ('passed', models.BooleanField(blank=True, db_column='passed', null=True)),
                ('answers', models.JSONField(blank=True, db_column='answers', null=True)),
                ('started_at', models.DateTimeField(blank=True, db_column='started_at', null=True)),
                ('completed_at', models.DateTimeField(blank=True, db_column='completed_at', null=True)),
                ('quiz', models.ForeignKey(db_column='quiz_id', on_delete=django.db.models.deletion.CASCADE, related_name='attempts', to='trainer.quiz')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='quiz_attempts', to='trainer.profile')),
            ],
            options={
                'db_table': 'quiz_attempts',
                'managed': True,
            },
        ),
        migrations.AddField(
            model_name='quiz',
            name='unit',
            field=models.ForeignKey(db_column='unit_id', on_delete=django.db.models.deletion.CASCADE, related_name='quizzes', to='trainer.unit'),
        ),
        migrations.CreateModel(
            name='Question',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type', models.CharField(choices=[('multiple_choice', 'Multiple Choice'), ('multiple_answer', 'Multiple Answer'), ('true_false', 'True/False'), ('short_answer', 'Short Answer'), ('essay', 'Essay'), ('fill_blank', 'Fill in the Blank'), ('matching', 'Matching'), ('ordering', 'Ordering'), ('free_text', 'Free Text')], db_column='type', max_length=30)),
                ('text', models.TextField(db_column='text')),
                ('options', models.JSONField(db_column='options', default=list)),
                ('correct_answer', models.JSONField(blank=True, db_column='correct_answer', null=True)),
                ('points', models.IntegerField(db_column='points', default=1)),
                ('order', models.IntegerField(db_column='order', default=0)),
                ('quiz', models.ForeignKey(db_column='quiz_id', on_delete=django.db.models.deletion.CASCADE, related_name='questions', to='trainer.quiz')),
            ],
            options={
                'db_table': 'questions',
                'ordering': ['quiz', 'order'],
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='PresentationUnit',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('file_url', models.CharField(blank=True, db_column='file_url', max_length=500, null=True)),
                ('file_storage_path', models.CharField(blank=True, db_column='file_storage_path', max_length=500, null=True)),
                ('slide_count', models.IntegerField(db_column='slide_count', default=0)),
                ('unit', models.OneToOneField(db_column='unit_id', on_delete=django.db.models.deletion.CASCADE, related_name='presentation_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'presentation_units',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='PageUnit',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('content', models.JSONField(db_column='content', default=list)),
                ('unit', models.OneToOneField(db_column='unit_id', on_delete=django.db.models.deletion.CASCADE, related_name='page_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'page_units',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('notification_id', models.UUIDField(db_column='notification_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('notification_type', models.CharField(choices=[('assignment', 'Assignment'), ('test', 'Test'), ('badge', 'Badge'), ('deadline', 'Deadline'), ('course', 'Course'), ('grade', 'Grade'), ('system', 'System'), ('reminder', 'Reminder')], db_column='notification_type', max_length=50)),
                ('title', models.CharField(blank=True, db_column='title', max_length=500, null=True)),
                ('message', models.TextField(db_column='message')),
                ('link_url', models.TextField(blank=True, db_column='link_url', null=True)),
                ('priority', models.CharField(choices=[('low', 'Low'), ('normal', 'Normal'), ('high', 'High'), ('urgent', 'Urgent')], db_column='priority', default='normal', max_length=20)),
                ('status', models.CharField(choices=[('unread', 'Unread'), ('read', 'Read'), ('archived', 'Archived')], db_column='status', default='unread', max_length=20)),
                ('sent_via', models.CharField(choices=[('in_app', 'In App'), ('email', 'Email'), ('both', 'Both')], db_column='sent_via', default='in_app', max_length=30)),
                ('read_at', models.DateTimeField(blank=True, db_column='read_at', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='trainer.profile')),
            ],
            options={
                'db_table': 'notifications',
                'ordering': ['-created_at'],
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Note',
            fields=[
                ('note_id', models.UUIDField(db_column='note_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('content', models.TextField(db_column='content')),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('module', models.ForeignKey(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='notes', to='trainer.unit')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='notes', to='trainer.profile')),
            ],
            options={
                'db_table': 'notes',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='ModuleSequencing',
            fields=[
                ('sequence_id', models.UUIDField(db_column='sequence_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('drip_feed_rule', models.CharField(db_column='drip_feed_rule', default='none', max_length=30)),
                ('drip_feed_delay_days', models.IntegerField(db_column='drip_feed_delay_days', default=0)),
                ('prerequisite_completed', models.BooleanField(db_column='prerequisite_completed', default=False)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('course', models.ForeignKey(db_column='course_id', on_delete=django.db.models.deletion.CASCADE, related_name='module_sequencing', to='trainer.course')),
                ('module', models.ForeignKey(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='sequencing', to='trainer.unit')),
                ('preceding_module', models.ForeignKey(blank=True, db_column='preceding_module_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='+', to='trainer.unit')),
            ],
            options={
                'db_table': 'module_sequencing',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='MediaMetadata',
            fields=[
                ('id', models.UUIDField(db_column='media_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('storage_path', models.CharField(db_column='storage_path', max_length=500, unique=True)),
                ('file_name', models.CharField(db_column='file_name', max_length=255)),
                ('file_type', models.CharField(db_column='file_type', max_length=50)),
                ('file_size', models.BigIntegerField(blank=True, db_column='file_size', null=True)),
                ('mime_type', models.CharField(blank=True, db_column='mime_type', max_length=100, null=True)),
                ('duration', models.IntegerField(blank=True, db_column='duration', null=True)),
                ('width', models.IntegerField(blank=True, db_column='width', null=True)),
                ('height', models.IntegerField(blank=True, db_column='height', null=True)),
                ('uploaded_at', models.DateTimeField(db_column='uploaded_at', default=django.utils.timezone.now)),
                ('unit', models.ForeignKey(blank=True, db_column='unit_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='media_files', to='trainer.unit')),
                ('uploaded_by', models.ForeignKey(db_column='uploaded_by', on_delete=django.db.models.deletion.CASCADE, related_name='uploaded_media', to='trainer.profile')),
            ],
            options={
                'db_table': 'media_metadata',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Leaderboard',
            fields=[
                ('id', models.UUIDField(db_column='leaderboard_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('total_points', models.IntegerField(db_column='points', default=0)),
                ('completed_units', models.IntegerField(db_column='completed_units', default=0)),
                ('quiz_score_total', models.IntegerField(db_column='quiz_score_total', default=0)),
                ('activity_points', models.IntegerField(db_column='activity_points', default=0)),
                ('rank', models.IntegerField(db_column='rank', default=0)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('course', models.ForeignKey(blank=True, db_column='scope_id', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='leaderboard_entries', to='trainer.course')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='leaderboard_entries', to='trainer.profile')),
            ],
            options={
                'db_table': 'leaderboard',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Enrollment',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('assigned', 'Assigned'), ('in_progress', 'In Progress'), ('completed', 'Completed')], db_column='status', default='assigned', max_length=20)),
                ('progress_percentage', models.IntegerField(db_column='progress_percentage', default=0)),
                ('assigned_at', models.DateTimeField(db_column='assigned_at', default=django.utils.timezone.now)),
                ('started_at', models.DateTimeField(blank=True, db_column='started_at', null=True)),
                ('completed_at', models.DateTimeField(blank=True, db_column='completed_at', null=True)),
                ('assigned_by', models.ForeignKey(blank=True, db_column='assigned_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_enrollments', to='trainer.profile')),
                ('course', models.ForeignKey(db_column='course_id', on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='trainer.course')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='trainer.profile')),
            ],
            options={
                'db_table': 'enrollments',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='Certificate',
            fields=[
                ('certificate_id', models.UUIDField(db_column='certificate_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(db_column='title', max_length=255)),
                ('issued_date', models.DateTimeField(db_column='issued_date', default=django.utils.timezone.now)),
                ('valid_until', models.DateTimeField(blank=True, db_column='valid_until', null=True)),
                ('file_url', models.URLField(blank=True, db_column='file_url', null=True)),
                ('status', models.CharField(choices=[('active', 'Active'), ('revoked', 'Revoked'), ('expired', 'Expired')], db_column='status', default='active', max_length=20)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('course', models.ForeignKey(blank=True, db_column='course_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='trainer.course')),
                ('issued_by', models.ForeignKey(blank=True, db_column='issued_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='trainer.profile')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'certificates',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='BadgeAssignment',
            fields=[
                ('badge_assignment_id', models.UUIDField(db_column='badge_assignment_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('reason', models.TextField(blank=True, db_column='reason', null=True)),
                ('earned_at', models.DateTimeField(db_column='earned_at', default=django.utils.timezone.now)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('assigned_by', models.ForeignKey(blank=True, db_column='assigned_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='trainer.profile')),
                ('badge', models.ForeignKey(db_column='badge_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.badge')),
                ('course', models.ForeignKey(blank=True, db_column='course_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='trainer.course')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'badge_assignments',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('log_id', models.UUIDField(db_column='log_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action_type', models.CharField(db_column='action_type', max_length=100)),
                ('entity_type', models.CharField(blank=True, db_column='entity_type', max_length=50, null=True)),
                ('entity_id', models.CharField(blank=True, db_column='entity_id', max_length=255, null=True)),
                ('details', models.JSONField(db_column='details', default=dict)),
                ('ip_address', models.CharField(blank=True, db_column='ip_address', max_length=45, null=True)),
                ('user_agent', models.TextField(blank=True, db_column='user_agent', null=True)),
                ('timestamp', models.DateTimeField(db_column='timestamp', default=django.utils.timezone.now)),
                ('user', models.ForeignKey(blank=True, db_column='user_id', null=True, on_delete=django.db.models.deletion.SET_NULL, to='trainer.profile')),
            ],
            options={
                'db_table': 'audit_logs',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AudioUnit',
            fields=[
                ('id', models.UUIDField(db_column='id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('audio_url', models.CharField(blank=True, db_column='audio_url', max_length=500, null=True)),
                ('audio_storage_path', models.CharField(blank=True, db_column='audio_storage_path', max_length=500, null=True)),
                ('duration', models.IntegerField(db_column='duration', default=0)),
                ('unit', models.OneToOneField(db_column='unit_id', on_delete=django.db.models.deletion.CASCADE, related_name='audio_details', to='trainer.unit')),
            ],
            options={
                'db_table': 'audio_units',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AssignmentSubmissionReview',
            fields=[
                ('review_id', models.UUIDField(db_column='review_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('review_note', models.TextField(blank=True, db_column='review_note', null=True)),
                ('score', models.IntegerField(blank=True, db_column='score', null=True)),
                ('status', models.CharField(choices=[('reviewed', 'Reviewed'), ('pending', 'Pending'), ('needs_revision', 'Needs Revision')], db_column='status', default='reviewed', max_length=30)),
                ('reviewed_at', models.DateTimeField(db_column='reviewed_at', default=django.utils.timezone.now)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('reviewer', models.ForeignKey(db_column='reviewer_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
                ('submission', models.ForeignKey(db_column='submission_id', on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='trainer.assignmentsubmission')),
            ],
            options={
                'db_table': 'assignment_submission_reviews',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AssignmentRubricItemScore',
            fields=[
                ('item_score_id', models.UUIDField(db_column='item_score_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('points_awarded', models.IntegerField(db_column='points_awarded', default=0)),
                ('feedback', models.TextField(blank=True, db_column='feedback', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('item', models.ForeignKey(db_column='item_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.assignmentrubricitem')),
                ('submission', models.ForeignKey(db_column='submission_id', on_delete=django.db.models.deletion.CASCADE, related_name='rubric_item_scores', to='trainer.assignmentsubmission')),
            ],
            options={
                'db_table': 'assignment_rubric_item_scores',
                'managed': True,
            },
        ),
        migrations.AddField(
            model_name='assignment',
            name='unit',
            field=models.OneToOneField(db_column='module_id', on_delete=django.db.models.deletion.CASCADE, related_name='assignment_details', to='trainer.unit'),
        ),
        migrations.CreateModel(
            name='AssessmentSubmission',
            fields=[
                ('submission_id', models.UUIDField(db_column='submission_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('attempt_number', models.IntegerField(db_column='attempt_number', default=1)),
                ('response_text', models.TextField(blank=True, db_column='response_text', null=True)),
                ('response_file_url', models.URLField(blank=True, db_column='response_file_url', null=True)),
                ('score', models.IntegerField(blank=True, db_column='score', null=True)),
                ('feedback', models.TextField(blank=True, db_column='feedback', null=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted'), ('graded', 'Graded'), ('returned', 'Returned')], db_column='status', default='submitted', max_length=30)),
                ('submitted_at', models.DateTimeField(db_column='submitted_at', default=django.utils.timezone.now)),
                ('graded_at', models.DateTimeField(blank=True, db_column='graded_at', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('assessment', models.ForeignKey(db_column='assessment_id', on_delete=django.db.models.deletion.CASCADE, related_name='submissions', to='trainer.assessment')),
                ('graded_by', models.ForeignKey(blank=True, db_column='graded_by', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='trainer.profile')),
                ('user', models.ForeignKey(db_column='user_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile')),
            ],
            options={
                'db_table': 'assessment_submissions',
                'managed': True,
            },
        ),
        migrations.CreateModel(
            name='AssessmentItemScore',
            fields=[
                ('item_score_id', models.UUIDField(db_column='item_score_id', default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('points_awarded', models.IntegerField(db_column='points_awarded', default=0)),
                ('feedback', models.TextField(blank=True, db_column='feedback', null=True)),
                ('created_at', models.DateTimeField(db_column='created_at', default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True, db_column='updated_at')),
                ('item', models.ForeignKey(db_column='item_id', on_delete=django.db.models.deletion.CASCADE, to='trainer.assessmentitem')),
                ('submission', models.ForeignKey(db_column='submission_id', on_delete=django.db.models.deletion.CASCADE, related_name='item_scores', to='trainer.assessmentsubmission')),
            ],
            options={
                'db_table': 'assessment_item_scores',
                'managed': True,
            },
        ),
        migrations.AddField(
            model_name='assessment',
            name='course',
            field=models.ForeignKey(blank=True, db_column='course_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='trainer.course'),
        ),
        migrations.AddField(
            model_name='assessment',
            name='created_by',
            field=models.ForeignKey(db_column='created_by', on_delete=django.db.models.deletion.CASCADE, to='trainer.profile'),
        ),
        migrations.AddField(
            model_name='assessment',
            name='module',
            field=models.ForeignKey(blank=True, db_column='module_id', null=True, on_delete=django.db.models.deletion.CASCADE, to='trainer.unit'),
        ),
        migrations.AddConstraint(
            model_name='userrole',
            constraint=models.UniqueConstraint(fields=('user', 'role'), name='user_role_pk'),
        ),
        migrations.AlterUniqueTogether(
            name='userprogress',
            unique_together={('user', 'course')},
        ),
        migrations.AlterUniqueTogether(
            name='unitprogress',
            unique_together={('user', 'unit')},
        ),
        migrations.AlterUniqueTogether(
            name='testresponse',
            unique_together={('attempt', 'question')},
        ),
        migrations.AlterUniqueTogether(
            name='testattempt',
            unique_together={('test', 'user', 'attempt_number')},
        ),
        migrations.AddConstraint(
            model_name='modulesequencing',
            constraint=models.UniqueConstraint(fields=('course', 'module'), name='uq_module_seq'),
        ),
        migrations.AlterUniqueTogether(
            name='leaderboard',
            unique_together={('user', 'course')},
        ),
        migrations.AlterUniqueTogether(
            name='enrollment',
            unique_together={('course', 'user')},
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['user', 'timestamp'], name='idx_audit_user_time'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['action_type'], name='idx_audit_action'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['entity_type'], name='idx_audit_entity'),
        ),
        migrations.AlterUniqueTogether(
            name='assignmentsubmissionreview',
            unique_together={('submission', 'reviewer')},
        ),
        migrations.AlterUniqueTogether(
            name='assignmentrubricitemscore',
            unique_together={('submission', 'item')},
        ),
        migrations.AlterUniqueTogether(
            name='assessmentsubmission',
            unique_together={('assessment', 'user', 'attempt_number')},
        ),
        migrations.AlterUniqueTogether(
            name='assessmentitemscore',
            unique_together={('submission', 'item')},
        ),
    ]
